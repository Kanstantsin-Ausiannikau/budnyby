/*!
 * StyleWizard
 * www.easydnnsolutions.com/modules/easydnnstylewizard/
 *
 * Copyright 2013 EasyDNNsolutions.com
 * SocialMediaBox has been developed by EasyDNNsolutions.com. It can be
 * used only as an integral part of EasyDNNsolutions.com modules.
 * All unauthorized copying or use of the code or parts of the code is
 * prohibited.
 */

(function(b,ca,da,p){var ea=!1,r={},s={},l={},$=[],aa=!1,w,L,z=function(b){return L.localization[b]==p?b:L.localization[b]},Q=function(b,c){var f=function(b){c&&c(s.css.generateColorText(b))};return{color:b,showInput:!0,allowEmpty:!0,showAlpha:!0,showPalette:!1,showInitial:!0,preferredFormat:"hex",change:f,move:f,hide:f,className:"styleWizardPicker",chooseText:"OK",cancelText:"Cancel",clickoutFiresChange:!0}},fa=0,V=0,ga=0,ha=0,ia=0,W=0,X=0,ba=0,y=-1,A=[],Y=!0,H=[],R={},S=[],ma=b(ca),B,I,ja,Z,M,x,
T,F,U;r.resize=function(){fa=B.height();W=x.width();r.innerResize()};r.innerResize=function(){var a=y,a=b("> .subject_"+a+"_"+A[a],x);ia=M.is(":visible")?M.outerHeight(!0):0;ga=ja.outerHeight(!0);ha=Z.outerHeight(!0);X=fa-ia-ga-ha;x.height(X);T.is(":visible")&&T.height(X).tinyscrollbar_update("relative");0<a.length&&(b("> .slider > .styleSelection",a).tinyscrollbar_update("relative"),0==ba&&(ba=b("> .slider > .styleEditor > .header",a).outerHeight(!0)),b("> .slider > .styleEditor > .editor",a).height(X-
ba).tinyscrollbar_update("relative"))};r.openActiveCollection=function(){var a=y,c=w[a].subjects,f="";T.css("display","none");x.css("display","block");1<c.length?(b.each(c,function(b,a){f+="<option>"+s.html.encode(a.name)+"</option>"}),c=M.css("display","block").find("> select").html(f),c[0].selectedIndex=A[a]):M.css("display","none");b("> li",F).removeClass("active").eq(a).addClass("active");r.openActiveSubject()};r.openActiveSubject=function(){var a=y,c=A[a],f=w[a].subjects[c],d=b("> .subject_"+
a+"_"+c,x),f=f.activeStyle.type;0==d.length&&(r.initSubjectLayout(a,c),d=b("> .subject_"+a+"_"+c,x));a=b("> .slider",d);a=b(".styleSelection",a);a=b("> .viewport > .overview",a);b("> .styleTypes >",a).css("display","none").filter("."+f).css("display","block");b("> .styleTypeSelection >",a).removeClass("active").filter("."+f).addClass("active");b("> .styleTypes > div > ol > li",a).removeClass("actionsOverlayActive");b(">",x).css("display","none");d.css("display","block");r.innerResize()};r.initSubjectLayout=
function(a,c){var f=w[a],d=f.subjects[c],f=f.styleGroups[d.styleGroup],e="",k=b('<div class="subject_'+a+"_"+c+'"><div class="slider"><div class="styleSelection standardScrollbar"><div class="viewport"><div class="overview"></div></div><div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div></div><div class="styleEditor"><div class="header"><div class="back"><span class="icon"></span><span class="text">Back to style selection</span></div><div class="styleName"><label><span>Style name:</span><input type="text" name="styleName" value="" /></label></div></div><div class="editor standardScrollbar"><div class="viewport"><div class="overview"><div class="styleEditorSpacer"></div></div></div><div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div></div></div></div></div>'),
e=b("> .slider",k),g=b("> .styleSelection",e),h=b("> .viewport > .overview",g),l,u,n=b("> .styleEditor",e),n=b("> .editor",n),q=!1;d.initialActiveStyle=b.extend({},d.activeStyle);e.width(2*W);b(">",e).width(W);e='<ul class="styleTypeSelection"><li class="predefined"><span>'+z("Predefined")+'</span></li><li class="custom"><span>'+z("Custom")+'</span></li></ul><div class="styleTypes"><div class="predefined" style="display: none;"><ol></ol></div><div class="custom" style="display: none;"><ol></ol></div></div>';
h.html(e);l=b("> .styleTypes > .predefined > ol",h);b.each(f.styles.predefined,function(a,c){var f=s.style.getNameAndColors(c,d.templateGroup);c.show!=p&&-1==b.inArray(d.templateGroup,c.show)||l.append(r.generateStyleListItem({name:f.name,type:"predefined",colors:f.colors,active:"predefined"==d.activeStyle.type&&d.activeStyle.id==a,id:a}))});b.isEmptyObject(f.styles.custom)||(u=b("> .styleTypes > .custom > ol",h),b.each(f.styles.custom,function(a,c){var f=s.style.getNameAndColors(c,d.templateGroup);
c.show&&-1==b.inArray(d.templateGroup,c.show)||(q=!0,u.append(r.generateStyleListItem({name:f.name,type:"custom",colors:f.colors,active:"custom"==d.activeStyle.type&&d.activeStyle.id==a,id:a})))}));q||b("> .styleTypeSelection > .custom",h).css("display","none");k.data("subjectIndex",c).appendTo(x);g.tinyscrollbar();n.tinyscrollbar()};r.generateStyleListItem=function(a){var c="custom"==a.type,c=b('<li class="'+(a.active?"active":"")+(c?" "+a.id:"")+'"><ol class="colorPreview"></ol><span>'+s.html.encode(a.name)+
'</span><div class="overlayWrapper"><div class="actionsOverlay"><div class="action edit" title="'+z("Edit style")+'"><span>'+z("Edit style")+"</span></div>"+(c?'<div class="action delete" title="'+z("Delete style")+'"><span>'+z("Delete style")+"</span></div>":"")+'<div class="action close" title="'+z("Close actions")+'"><span>'+z("Close actions")+'</span></div></div><div class="standardOverlay"><div class="openActionsOverlay" title="'+z("Open actions")+'"><span>'+z("Open actions")+"</span></div></div></div></li>"),
f=b("> .colorPreview",c);a.colors!=p&&0<a.colors.length&&b.each(a.colors,function(a,c){f.prepend(b("<li></li>").css("background",c))});return c.data("styleId",a.id)};r.cloneStyle=function(a){var c=w[a.collection],c=c.styleGroups[c.subjects[a.subject].styleGroup].styles,f=c[a.type][a.id],d={},e,k;c.custom==p&&(c.custom={});do e="s"+s.string.random(10).toLowerCase();while(c.custom[e]!=p);b.extend(!0,d,f);for(k in d.templateGroups)d.templateGroups[k].name+=" Copy";d.originalStyleId="predefined"==a.type?
a.id:f.originalStyleId;d.baseCss="";c.custom[e]=d;return e};r.setupStyleEditor=function(){var a=y,c=A[a],f=w[a],d=f.subjects[c],e=f.styleGroups[d.styleGroup],k=e.styles.custom[d.activeStyle.id],g=s.style.getNameAndColors(k,d.templateGroup),h=e.styles.predefined[k.originalStyleId].baseCss,a=b("> .subject_"+a+"_"+c,x),m=b("> > .styleEditor",a),a=b("> .header",m),m=b("> .editor > .viewport > .overview > .styleEditorSpacer",m);k!=p&&("string"!=typeof h&&(h=""),0<H.length&&(b.each(H,function(b,a){a.spectrum("destroy")}),
H=[]),l.changeSectionStyle({collectionType:f.type,styleSwitchCriteria:d.styleSwitchCriteria,styleGroup:d.styleGroup,globalFontFamilies:e.customFontFamilies,template:d.template,templateGroup:d.templateGroup,themeName:e.themeName,assetsRootPath:e.styleAssetsClientRoot,style:{type:"custom",id:d.activeStyle.id,definition:e.styleDefinitions,values:k.values,baseCss:h}}),b("> .styleName input",a).val(g.name),m.html(""),r.generateStyleEditorElements(m,f.styleGroups[d.styleGroup].styleDefinitions,k.values,
d.templateGroup,d.subCollection,"styleWizardEditor_"+f.type+"_"+c+"_"+d.activeStyle.id,"",e.customFontFamilies))};r.generateStyleEditorElements=function(a,c,f,d,e,k,g,h){var m,u;c.properties&&f.properties&&(m=b('<ul class="properties mainCollapsibleBoxes" />').appendTo(a),b.each(c.properties,function(a,c){var u,v=c.type,t;"string"==typeof e&&""!=e&&"string"==typeof c.subCollection&&""!=c.subCollection&&c.subCollection!=e||f.properties[a]==p||c.show&&-1==b.inArray(d,c.show)||!b.isArray(c.show)&&c.hide&&
-1!=b.inArray(d,c.hide)||(u=b('<li class="'+v+'"><div class="toggleContainer"><div class="name property"></div><div class="descendantIndicator"></div></div><div class="toggleContent">'+(1<c.states.length?"<ol></ol>":"")+'<div class="propertyStatesWrapper"></div><div class="descendantIndicator property"></div></div></li>').appendTo(m),b("> .toggleContainer > .name",u).text(c.name),t=b("> .toggleContent",u).css("display","none"),u.data("propertyInitializer",function(){var d="";b.each(c.states,function(e,
t){var m=b("<div />"),D={};m.addClass(v).appendTo(b("> .toggleContent > .propertyStatesWrapper",u));1<c.states.length&&(d+="<li"+("default"==t.id?' class="active"':"")+"><span>"+s.html.encode(t.name)+"</span></li>");"text"==v&&(D={customFonts:b.isArray(h)&&0<h.length?h:[]});l.generatePropertyEditorHtml(m,v,t.forbidden,f.properties[a],t.id,k+"_"+a+"_"+e,g+a,D);l.propertyStateSubsectionDropdown(m,v,t.forbidden,f.properties[a][t.id]);"default"!=t.id&&m.css("display","none")});b("> ol",t).html(d)}))}));
c.sections&&f.sections&&(u=b('<ul class="sections mainCollapsibleBoxes" />').appendTo(a),b.each(c.sections,function(a,c){var l,m;f.sections[a]==p||c.show&&-1==b.inArray(d,c.show)||!b.isArray(c.show)&&c.hide&&-1!=b.inArray(d,c.hide)||(l=b('<li><div class="toggleContainer"><div class="name"></div><div class="descendantIndicator"></div></div><div class="toggleContent"></div></li>').appendTo(u),m=b("> .toggleContent",l),b("> .toggleContainer > .name",l).text(c.name),r.generateStyleEditorElements(m,c,
f.sections[a],d,e,k+"_"+a,g+a+"_",h),0<b("> .properties >",m).length||0<b("> .sections >",m).length?m.css("display","none"):l.remove())}))};r.toggleInterface=function(b,c){var f,d,e;b?(Y=!1,I.html("<span />Hide"),f=0,e=V-1,d=V):(Y=!0,I.html("<span />StyleWizard"),f=-V,e=0,d=-F.outerHeight());c?(I.stop(!0).animate({left:e},100),B.stop(!0).animate({left:f},100),F.stop(!0).animate({left:d},100)):(I.stop(!0).css({left:e}),B.stop(!0).css({left:f}),F.stop(!0).css({left:d}))};l.changeSectionStyle=function(a){var c;
c="";var f="eds_"+a.collectionType+"_"+a.styleGroup,d=".eds_style_"+a.style.type+"_"+a.style.id,e=s.style.replaceCssTokens(a.style.baseCss,d,a.themeName,a.assetsRootPath),k={themeName:a.themeName,styleType:a.style.type,styleId:a.style.id};if("skin"!=a.collectionType){c=".eds_"+a.collectionType+"_"+a.themeName+".eds_template_"+a.template;a.styleSwitchCriteria&&(c+=".eds_styleSwitchCriteria_"+a.styleSwitchCriteria);c=b(c);s.css.removeClassContaining(c,"eds_style_");if("predefined"==a.style.type&&"default"==
a.style.id)return;f+="_"+a.style.type+"_"+a.style.id;c.addClass("eds_style_"+a.style.type+"_"+a.style.id);c=".eds_"+a.collectionType+"_"+a.themeName+d}l.updateStyleTag(f,e+l.generateStyleCss(a.style.definition,a.style.values,c,a.assetsRootPath,k,a.globalFontFamilies))};l.updateActiveSubjectStyle=function(){var b=y,c=w[b],f=c.subjects[A[b]],b=c.styleGroups[f.styleGroup],c=c.type,d=f.activeStyle.type,e=f.activeStyle.id,f="eds_"+c+"_"+f.styleGroup,k="",g=b.styles[d][e],h="",m=".eds_style_"+d+"_"+e,u=
{themeName:b.themeName,styleType:d,styleId:e};"skin"!=c&&(f+="_"+d+"_"+e,k=".eds_"+c+"_"+b.themeName+m);h="predefined"==d?g.baseCss:b.styles.predefined[g.originalStyleId].baseCss;"string"!=typeof h&&(h="");h=s.style.replaceCssTokens(h,m,b.themeName,b.styleAssetsClientRoot);l.updateStyleTag(f,h+l.generateStyleCss(b.styleDefinitions,g.values,k,b.styleAssetsClientRoot,u,b.customFontFamilies))};l.updateStyleTag=function(a,c){l.updateCssImports();b("head > style#"+a).remove();$tag=b('<style type="text/css" />').html(c).attr("id",
a).appendTo("head")};l.addCssImport=function(a){-1===b.inArray(a,$)&&($.push(a),aa=!0)};l.updateCssImports=function(){var a=b("head > style#styleWizardCssImports"),c="";aa&&(aa=!1,b.each($,function(b,a){c+="@import url("+a+");"}),""!=c&&(a.remove(),a=b('<style type="text/css" id="styleWizardCssImports" />').appendTo("head"),a.html(c)))};l.generateStyleCss=function(a,c,f,d,e,k){var g="",h={};"object"==typeof a.properties&&c.properties&&(b.each(a.properties,function(a,g){var n=c.properties[a],q="";
n!=p&&(g.subCollection&&(q=".eds_subCollection_"+g.subCollection),b.each(g.states,function(a,c){var t=l.generateCssFromProperty(g.type,n[c.id],c.forbidden,c.important,d,k),m="";b.isArray(c.selectors)&&0!=c.selectors.length&&(b.each(c.selectors,function(a,c){var d=("custom"==e.styleType?"custom_":"")+e.styleId;"!"==c[0]?(c=c.substr(1).replace(/_-ThemeName-_/g,e.themeName).replace(/_-StyleTypeAndId-_/g,d),m+=c+","):f&&b.isArray(g.show)?b.each(g.show,function(b,a){m+=f+q+".eds_templateGroup_"+a+c+","}):
m+=f+q+c+","}),m=m.substring(0,m.length-1),h[m]==p&&(h[m]=""),h[m]+=t)}))}),b.each(h,function(b,a){g+=b+"{"+a+"}"}));"object"==typeof a.sections&&c.sections&&b.each(a.sections,function(b,a){var h=c.sections[b];h!=p&&(g+=l.generateStyleCss(a,h,f,d,e,k))});return g};l.listStylesThatUseBackgroundImage=function(a,c,f){var d=y,e=w[d],d=e.styleGroups[e.subjects[A[d]].styleGroup].styles,k={predefined:{},custom:{}};if("string"==typeof f){if(""==f)return{};f=f.split("_")}if(0==f.length)return{};"predefined"==
c&&d[c]&&b.each(d[c],function(d,e){b.each(l.getStyleProperty(e.values,b.extend([],f)),function(b,f){if("object"==typeof f.values.image&&f.values.image.type==c&&f.values.image.file==a)return k[c][d]=e,!1})});b.each(d.custom,function(c,d){b.each(l.getStyleProperty(d.values,b.extend([],f)),function(b,f){if("object"==typeof f.values.image&&"uploaded"==f.values.image.type&&f.values.image.file==a)return k.custom[c]=d,!1})});return k};l.getStyleProperty=function(b,c){var f;if(1==c.length)return b.properties[c[0]];
f=c[0];c=c.splice(c.length-(c.length-1));return b.sections==p||b.sections[f]==p?p:l.getStyleProperty(b.sections[f],c)};l.generateCssFromProperty=function(a,c,f,d,e,k){a=l.generateCssFromProperty[a];if(a==p)return"";b.isArray(f)||(f=[]);b.isArray(c.disabled)&&(f=f.concat(c.disabled));return a(c.values,f,d,e,k)};l.generateCssFromProperty.background=function(a,c,f,d){var e="";-1===b.inArray("color",c)&&(e="background-color:"+a.color,-1<b.inArray("color",f)&&(e+="!important"),e+=";");-1===b.inArray("image",
c)&&(e+="background-image:",e="object"!=typeof a.image||"string"!=typeof a.image.completeUrl||""==a.image.completeUrl?e+"none":e+('url("'+a.image.completeUrl.replace(/_-StyleAssetsClientRoot-_/g,d)+'")'),-1<b.inArray("image",f)&&(e+="!important"),e+=";");-1===b.inArray("repeat",c)&&(e+="background-repeat:",e="string"!=typeof a.repeat||""==a.repeat?e+"repeat":e+a.repeat,-1<b.inArray("repeat",f)&&(e+="!important"),e+=";");-1===b.inArray("attachment",c)&&(e+="background-attachment:",e="string"!=typeof a.attachment||
""==a.attachment?e+"scroll":e+a.attachment,-1<b.inArray("attachment",f)&&(e+="!important"),e+=";");-1===b.inArray("position",c)&&(e=e+"background-position:"+(a.position.horizontal.value+a.position.horizontal.unit+" "),e+=a.position.vertical.value+a.position.vertical.unit,-1<b.inArray("attachment",f)&&(e+="!important"),e+=";");return e};l.generateCssFromProperty.text=function(a,c,f,d,e){d="";var k="text-shadow:",g="",h=p,h=[];-1===b.inArray("fontFamily",c)&&(b.isArray(a.customFontFamilies)&&(h=a.customFontFamilies),
b.isArray(e)&&(h=h.concat(e)),(h=s.style.getImportUrlFromFont(h,a.fontFamily))&&l.addCssImport(h),d='font-family:"'+a.fontFamily+'"',-1<b.inArray("fontFamily",f)&&(d+="!important"),d+=";");-1===b.inArray("color",c)&&(d+="color:"+a.color,-1<b.inArray("color",f)&&(d+="!important"),d+=";");-1===b.inArray("size",c)&&(d+="font-size:"+a.size.value+a.size.unit,-1<b.inArray("size",f)&&(d+="!important"),d+=";");-1===b.inArray("style",c)&&(d+="font-style:"+a.style,-1<b.inArray("style",f)&&(d+="!important"),
d+=";");-1===b.inArray("weight",c)&&(d+="font-weight:"+a.weight,-1<b.inArray("weight",f)&&(d+="!important"),d+=";");-1===b.inArray("lineHeight",c)&&(d+="line-height:"+a.lineHeight.value+a.lineHeight.unit,-1<b.inArray("lineHeight",f)&&(d+="!important"),d+=";");if(-1===b.inArray("transform",c)){d+="text-transform:";switch(a.transform){case "uppercase":d+="uppercase";break;case "lowercase":d+="lowercase";break;case "capitalize":d+="capitalize";break;default:d+="none"}-1<b.inArray("transform",f)&&(d+=
"!important");d+=";"}-1===b.inArray("decorations",c)&&("object"==typeof a.decorations&&(!0===a.decorations.underline&&(g=" underline"),!0===a.decorations.overline&&(g+=" overline"),!0===a.decorations.lineThrough&&(g+=" line-through")),""==g&&(g="none"),d+="text-decoration:"+g,-1<b.inArray("decorations",f)&&(d+="!important"),d+=";");-1===b.inArray("shadows",c)&&("object"==typeof a.shadows&&a.shadows.show&&b.isArray(a.shadows.list)&&0<a.shadows.list.length?(b.each(a.shadows.list,function(b,a){k+=a.x.value+
a.x.unit+" "+a.y.value+a.y.unit+" "+a.radius.value+a.radius.unit+" "+a.color+", "}),k=k.substr(0,k.length-2)):k+="none",d+=k,-1<b.inArray("shadows",f)&&(d+="!important"),d+=";");return d};l.generateCssFromProperty.border=function(a,c,f){var d="",e=-1==b.inArray("topSide",c),k=-1==b.inArray("bottomSide",c),g=-1==b.inArray("leftSide",c),h=-1==b.inArray("rightSide",c),l=-1<b.inArray("width",f),u=-1<b.inArray("style",f),n=-1<b.inArray("color",f),q=function(a,d){var f="";d=d?d+"-":"";-1==b.inArray("width",
c)&&(f+="border-"+d+"width:"+a.width.value+a.width.unit+(l?"!important":"")+";");-1==b.inArray("style",c)&&(f+="border-"+d+"style:"+a.style+(u?"!important":"")+";");-1==b.inArray("color",c)&&(f+="border-"+d+"color:"+a.color+(n?"!important":"")+";");return f};if("object"!=typeof a)return"";if(a.width||a.style||a.color){if(e&&k&&g&&h)return q(a);a={top:a,bottom:a,left:a,right:a}}b.each(a,function(a,f){-1==b.inArray(a+"Side",c)&&(d+=q(f,a))});return d};l.generateCssFromProperty.boxShadow=function(a,
c,f){var d="box-shadow:",e=0;if(-1!=b.inArray("shadows",c)||"object"!=typeof a||!1===a.show)return"";if(b.isArray(a.list)&&0!=a.list.length){for(;e<a.list.length;e++)c=a.list[e],d+=(c.inset?"inset ":"")+c.x.value+c.x.unit+" "+c.y.value+c.y.unit+" "+c.blur.value+c.blur.unit+" "+c.spread.value+c.spread.unit+" "+c.color+", ";d=d.substr(0,d.length-2)}else d+="none";-1<b.inArray("shadows",f)&&(d+="!important");return d+";"};l.generatePropertyEditorHtml=function(a,c,f,d,e,k,g,h){c=l.generatePropertyEditorHtml[c];
if(c!=p)return b.isArray(f)||(f=[]),c(a,f,d,e,k,g,h)};l.propertyStateSubsectionDropdown=function(a,c,f,d){c=R[c];var e,k,g,h;c!=p&&0!=c.length&&(h=a.parents(".styleEditor > .editor.standardScrollbar"),e=b('<div class="subsectionsSelectionDropdownWrapper"><div class="trigger"><span></span></div><div class="dropdown"><ol /></div></div>').prependTo(a),k=b("> div.dropdown",e),g=b("> ol",k),k=b("> div.trigger",e),k.on("click",function(){e.toggleClass("expanded");h.tinyscrollbar_update("relative")}),b.each(c,
function(c,e){var k,q,C;-1<b.inArray(e.id,f)||(k=b('<li><span><label><input type="checkbox" />'+s.html.encode(e.name)+"</label></span></li>"),q=b("input",k),C=b(".propertySubsection."+e.id,a),-1===b.inArray(e.id,d.disabled)?(q[0].checked=!0,C.removeClass("hide")):(q[0].checked=!1,C.addClass("hide")),q.on("change",function(){var a=b.inArray(e.id,d.disabled);q[0].checked?(-1!=a&&(d.disabled=s.array.removeItem(e.id,d.disabled)),C.trigger("enabling").removeClass("hide")):(-1===a&&(d.disabled==p&&(d.disabled=
[]),d.disabled.push(e.id)),C.trigger("disabling").addClass("hide"));h.tinyscrollbar_update("relative");l.updateActiveSubjectStyle()}),k.appendTo(g))}))};R.background=[{id:"color",name:"Color"},{id:"image",name:"Image"},{id:"repeat",name:"Repeat"},{id:"attachment",name:"Attachment"},{id:"position",name:"Position"}];l.generatePropertyEditorHtml.background=function(a,c,f,d,e,k){var g=f[d].values,h,m=!1,u=!1,n=y,q=w[n],C=q.subjects[A[n]],v=q.styleGroups[C.styleGroup],t=v.imagesMeta[k],G=p,O=a.parents(".styleEditor > .editor.standardScrollbar"),
r,J,D,N,ka,x,la,K,z,B,E,P;K=function(a,c){t[a]!=p&&b.each(t[a],function(d,f){var e=b('<li><div class="image"><img alt="" src="'+t.baseUrl.replace(/_-StyleAssetsClientRoot-_/g,v.styleAssetsClientRoot)+a+"/"+d+'" />'+("uploaded"==a?'<div class="alert" /><div class="loading delete" />':"")+"</div></li>");"object"==typeof g.image&&g.image.type==a&&g.image.file==d&&e.addClass("active");"uploaded"==a&&e.append('<div class="delete" title="Delete this image"><span /></div><div class="deleteConfirm" title="Really delete this image"><span /></div>');
c.css("display","block").append(e.data("file",d))})};-1===b.inArray("color",c)&&(a.append('<div class="propertySubsection color">Color: <input type="text" class="spectrumPicker" /></div>'),b("> .propertySubsection.color",a).on("disabling",function(){r.spectrum("hide")}),r=b("> .propertySubsection.color > input.spectrumPicker",a).spectrum(Q(g.color,function(b){f[d].values.color=b;l.updateActiveSubjectStyle()})),H.push(r));-1===b.inArray("image",c)&&(n=b('<div class="collapsableOptionsContainer propertySubsection image"><div class="trigger"><label><input type="checkbox" value="1" />Set image</label></div><div class="contentWrapper"><div class="content"><ul class="imageList predefined"></ul><ul class="imageList uploaded"></ul><div class="uploadWrapper"><div class="uploader"></div><ol></ol><div class="actions"><div class="action fileSelection"><span>Upload</span><input type="file" value="" multiple="multiple" /></div></div></div></div></div></div>').appendTo(a),
D=b("> .trigger input",n),J=b("> .contentWrapper",n),D.on("change",function(){D[0].checked?f[d].values.image=G!=p&&t[G.type]&&t[G.type][G.file]?G:p:(G=f[d].values.image,f[d].values.image=p);l.updateActiveSubjectStyle()}),"object"==typeof g.image&&"string"==typeof g.image.completeUrl&&""!=g.image.completeUrl&&(n.addClass("expanded"),J.css("display","block"),D[0].checked=!0),t&&(K("predefined",b(".imageList.predefined",J)),K("uploaded",b(".imageList.uploaded",J))),J.on("click",".imageList > li > div.image",
function(){var a=b(this).parent(),c=a.parent().hasClass("predefined")?"predefined":"uploaded",e=a.data("file");a.hasClass("active")||a.hasClass("deleting")||(f[d].values.image={completeUrl:t.baseUrl+c+"/"+e,file:e,type:c},l.updateActiveSubjectStyle(),b(".imageList > li",J).removeClass("active"),a.addClass("active"))}).on("click",".imageList > li > div.delete",function(){var a=b(this),c=a.parent();c.hasClass("confirmDelete")?(c.removeClass("confirmDelete"),a.parents(1).removeClass("transparentItems"),
a.attr("title","Delete this image")):(c.addClass("confirmDelete"),a.parents(1).addClass("transparentItems"),a.attr("title","Don't delete the image"))}).on("mouseleave",".imageList > li",function(){var a=b(this);a.parent().removeClass("transparentItems");a.removeClass("confirmDelete").find("> .delete").attr("title","Delete this image")}).on("click",".imageList > li > div.deleteConfirm",function(){var a=b(this).parent(),c=a.parent(),d=b(".imageList.uploaded",c.parents(".propertyStatesWrapper > div").siblings()),
f=a.data("file"),e,h=p,g=function(){a.removeClass("showLoading deleting");b("> .image > .alert",a).css("display","block").attr("title","There has been a problem while trying to delete this image. Please try again.")},m=function(a,c){var d=l.getStyleProperty(a.values,k.split("_"));b.each(d,function(b,a){var d=a.values.image;"object"==typeof d&&d.type==c&&d.file==f&&(a.values.image=p)})},D=function(){a.addClass("showLoading deleting");b.ajax({data:{collection:q.type,action:"deleteBackgroundImage",styleGroup:C.styleGroup,
collectionPortalId:v.portalId,universalPropertyId:k,file:f},dataType:"json",success:function(h){h.success!=p&&h.success?(E&&(b.each(e.custom,function(b,a){m(a,"uploaded")}),b.each(e.predefined,function(b,a){m(a,"predefined")})),delete t.uploaded[f],b.isEmptyObject(t.uploaded)?(a.fadeOut(200,function(){a.remove();0==b(">",c).length&&c.css("display","none")}),d.empty().css("display","none")):(b("> li",d).each(function(a,c){var d=b(c);d.data("file")==f&&d.remove()}),a.fadeOut(200,function(){a.remove()})),
O.tinyscrollbar_update("relative"),l.updateActiveSubjectStyle()):g()},error:function(){g()},timeout:15E3,url:L.backend})},E="";collectionIndex=y;subjectIndex=A[collectionIndex];q=w[collectionIndex];subject=q.subjects[subjectIndex];e=l.listStylesThatUseBackgroundImage(f,"uploaded",k);b.isEmptyObject(e.custom)||b.each(e.custom,function(b,a){var c=s.style.getNameAndColors(a,subject.templateGroup);E+="<li>"+c.name+"</li>"});b.isEmptyObject(e.predefined)||b.each(e.predefined,function(b,a){var c=s.style.getNameAndColors(a,
subject.templateGroup);E+="<li>"+c.name+"</li>"});E?(b("body").append('<div id="EasyDNNstyleWizardModalWrapper" class="imageDeleteConfirmation"><div><div class="content"><p>The image you are deleting is used in the following styles. Do you want to procede?</p><ul>'+E+'</ul></div><div class="actions"><span class="delete">Delete the image</span><span class="cancel">Cancel deletion</span></div></div></div>'),h=b("#EasyDNNstyleWizardModalWrapper").on("click",".actions > span",function(){b(this).hasClass("delete")&&
D();h.fadeOut(100,function(){h.remove()})})):D()}),P=b(".uploadWrapper > ol",J),E=b(".uploadWrapper > .uploader",J).fineUploader({uploaderType:"basic",autoUpload:!0,maxConnections:1,request:{endpoint:L.backend,inputName:"file",uuidName:"uuid",totalFileSizeName:"filesize",params:{collection:q.type,action:"uploadBackgroundImage",styleGroup:C.styleGroup,collectionPortalId:v.portalId,universalPropertyId:k}},validation:{allowedExtensions:["jpg","jpeg","gif","png","bmp"],stopOnFirstInvalidFile:!1}}).on("submit",
function(a,c,d){a=E.fineUploader("getFile",c);var f=b('<li class="file'+c+'"><div class="main"><p class="file">'+s.html.encode(a.name)+'</p><p class="uploadInfo">Queued ('+s.files.readableFileSize(a.size)+')</p><div class="progress"><div></div></div><div class="actions"><span class="retry" style="display: none;">Retry</span><span class="cancel">Cancel</span></div></div><div class="thumbnail"></div></li>').appendTo(P);d=new FileReader;var e=f.parent();b(".imageList.uploaded",e.parents(".propertyStatesWrapper > div").siblings());
d.onload=function(a){b("> .thumbnail",f).prepend('<img src="'+a.target.result+'" alt="" />')};f.data("imageReader",d).data("fileId",c);d.readAsDataURL(a);O.tinyscrollbar_update("relative")}).on("upload",function(a,c,d){a=b("> li.file"+c,P);a=b("> .main",a);b("> .progress",a).css("display","block")}).on("progress",function(a,c,d,f,e){a=b("> li.file"+c+" > .main",P);c=f/e*100;b("> .uploadInfo",a).text(Math.round(c)+"% ("+s.files.readableFileSize(f)+" of "+s.files.readableFileSize(e)+")");b("> .progress > div",
a).css("width",c+"%")}).on("complete",function(a,c,d,f){var e=b("> li.file"+c,P);c=b("> .main",e);a=e.data("imageReader");f.success==p||!0!==f.success?(e.addClass("failed"),b("> .uploadInfo",c).text("Upload failed"),b("> .progress",c).css("display","none"),b("> .progress > div",c).css("width",""),b("> .actions > .retry",c).css("display","")):(t.uploaded==p&&(t.uploaded={}),t.uploaded[f.filename]={width:f.width,height:f.height},c=b("ul.imageList.uploaded",e.parents(".propertyStatesWrapper").eq(0)).css("display",
"block"),b('<li><div class="image"><img alt="" src="'+t.baseUrl.replace(/_-StyleAssetsClientRoot-_/g,v.styleAssetsClientRoot)+"uploaded/"+f.filename+'" /><div class="alert" /><div class="loading delete" /></div><div class="delete" title="Delete this image"><span /></div><div class="deleteConfirm" title="Really delete this image"><span /></div></li>').data("file",f.filename).appendTo(c),a.readyState===FileReader.LOADING&&a.abort(),e.slideUp(200,function(){e.remove();O.tinyscrollbar_update("relative")}))}),
b(".uploadWrapper .fileSelection > input",J).on("change",function(){E.fineUploader("addFiles",this.files)}),P.on("click","> li > .main > .actions > .retry",function(){var a=b(this),c=a.parents().eq(2),d=c.data("fileId"),f=E.fineUploader("getFile",d);c.is(":last-child")||(c=c.detach().appendTo(P));c.removeClass("failed");b("> .main > .uploadInfo",c).text("Queued ("+s.files.readableFileSize(f.size)+")");a.css("display","none");E.fineUploader("retry",d)}).on("click","> li > .main > .actions > .cancel",
function(){var a=b(this).parents().eq(2);E.fineUploader("cancel",a.data("fileId"));a.remove()}));-1===b.inArray("position",c)&&(a.append('<div class="propertySubsection position"><div class="positionSelection horizontal">Horizontal position: <label><input type="radio" value="1" class="leftBgPosition" name="'+e+'_horizontalImagePositionRadios" />Left</label> <label><input type="radio" value="1" class="center" name="'+e+'_horizontalImagePositionRadios" />Center</label> <label><input type="radio" value="1" class="rightBgPosition" name="'+
e+'_horizontalImagePositionRadios" />Right</label> <label><input type="radio" value="1" class="custom" name="'+e+'_horizontalImagePositionRadios" />Custom</label><div>Custom: <input type="text" class="position numeric" value="" /> <select class="positionUnit numericUnit"><option value="px">px</option><option value="%">%</option><option value="em">em</option></select> </div></div><div class="positionSelection vertical">Vertical position: <label><input type="radio" value="1" class="top" name="'+e+'_verticalImagePositionRadios" />Top</label> <label><input type="radio" value="1" class="center" name="'+
e+'_verticalImagePositionRadios" />Center</label> <label><input type="radio" value="1" class="bottom" name="'+e+'_verticalImagePositionRadios" />Bottom</label> <label><input type="radio" value="1" class="custom" name="'+e+'_verticalImagePositionRadios" />Custom</label><div>Custom: <input type="text" class="position numeric" value="" /> <select class="positionUnit numericUnit"><option value="px">px</option><option value="%">%</option><option value="em">em</option></select> </div></div></div>'),N=b("> .propertySubsection.position > .positionSelection.vertical",
a),ka=b("input.position",N),x=b("select.positionUnit",N),la=b("> div",N),n=b("> .propertySubsection.position > .positionSelection.horizontal",a),K=b("input.position",n),z=b("select.positionUnit",n),B=b("> div",n),h=g.position.vertical,ka.val(h.value),x.val(h.unit),0==h.value&&(m=!0,b("input.top",N)[0].checked=!0),m||"%"!=h.unit||(50==h.value?(m=!0,b("input.center",N)[0].checked=!0):100==h.value&&(m=!0,b("input.bottom",N)[0].checked=!0)),m||(la.css("display","block"),b("input.custom",N)[0].checked=
!0),m=g.position.horizontal,K.val(m.value),z.val(m.unit),0==m.value&&(u=!0,b("input.leftBgPosition",n)[0].checked=!0),u||"%"!=m.unit||(50==m.value?(u=!0,b("input.center",n)[0].checked=!0):100==m.value&&(u=!0,b("input.rightBgPosition",n)[0].checked=!0)),u||(B.css("display","block"),b("input.custom",n)[0].checked=!0),b('> .propertySubsection.position > .positionSelection > label > input[type="radio"]',a).on("change",function(){var a=b(this),c=a.parents().eq(1),e=b("> div",c),c=c.hasClass("horizontal")?
"horizontal":"vertical";a.hasClass("custom")?e.css("display","block"):(e.css("display","none"),a=a.hasClass("center")?50:a.hasClass("leftBgPosition")||a.hasClass("top")?0:100,f[d].values.position[c].value=a,f[d].values.position[c].unit="%",b("input.position",e).val(a),b("select.positionUnit",e).val("%"),l.updateActiveSubjectStyle());O.tinyscrollbar_update("relative")}),b("> .propertySubsection.position > .positionSelection",a).on("keydown","input.numeric",function(a){var c=b(this),e=c.val(),h=c.parents().eq(1).hasClass("horizontal")?
"horizontal":"vertical",h=f[d].values.position[h];if(38==a.which||40==a.which){e=""==e?0:"px"==h.unit?parseInt(e,10):parseFloat(e,10);switch(a.which){case 38:e+=1;break;case 40:e-=1}c.val(e).data("stepChange",!0);h.value=e;l.updateActiveSubjectStyle()}}).on("keyup change","input.numeric",function(a){var c=b(this),e=c.val(),h=!1,k="",g;g=c.parents().eq(1).hasClass("horizontal")?"horizontal":"vertical";var m=f[d].values.position[g];"px"==m.unit?g=parseInt(e,10):(h="."==e[e.length-1],g=parseFloat(e,
10));if(isNaN(g)||"number"!=typeof g)g=0;if(!0==c.data("stepChange")||"0"==e||"keyup"!=a.type||0!=g)c.data("stepChange",!1),k=g+(h?".":"");c.val(k);m.value=g;l.updateActiveSubjectStyle()}).on("keydown keyup change","select.numericUnit",function(){var a=b(this),c=a.parents().eq(1).hasClass("horizontal")?"horizontal":"vertical";f[d].values.position[c].unit=a.val();l.updateActiveSubjectStyle()}));-1===b.inArray("repeat",c)&&(u=b('<div class="propertySubsection repeat">Repeat: <label><input type="radio" value="repeat" class="repeat" name="'+
e+'_imageRepeat" />Both</label> <label><input type="radio" value="repeat-x" class="repeat-x" name="'+e+'_imageRepeat" />Horizontal</label> <label><input type="radio" value="repeat-y" class="repeat-y" name="'+e+'_imageRepeat" />Vertical</label> <label><input type="radio" value="no-repeat" class="no-repeat" name="'+e+'_imageRepeat" />No</label></div>').appendTo(a),b("input",u).on("change",function(){f[d].values.repeat=b(this).val();l.updateActiveSubjectStyle()}).filter("."+(g.repeat?g.repeat:"repeat"))[0].checked=
!0);-1===b.inArray("attachment",c)&&(a=b('<div class="propertySubsection attachment">Attachment: <label><input type="radio" value="scroll" class="scroll" name="'+e+'_imageAttachment" />Scroll</label> <label><input type="radio" value="fixed" class="fixed" name="'+e+'_imageAttachment" />Fixed</label></div>').appendTo(a),b("input",a).on("change",function(){f[d].values.attachment=b(this).val();l.updateActiveSubjectStyle()}).filter("."+(g.attachment?g.attachment:"scroll"))[0].checked=!0)};R.border=[{id:"width",
name:"Width"},{id:"style",name:"Style"},{id:"color",name:"Color"},{id:"topSide",name:"Top"},{id:"bottomSide",name:"Bottom"},{id:"leftSide",name:"Left"},{id:"rightSide",name:"Right"}];l.generatePropertyEditorHtml.border=function(a,c,f,d,e){e=b("<ul><li><span>Uniform border</span></li><li><span>Specify each side</span></li></ul>");var k,g,h=a.parents(".styleEditor > .editor.standardScrollbar"),m=f[d].values,u,n=!(m.color!=p||m.width!=p||m.style!=p),q=-1==b.inArray("width",c),C=-1==b.inArray("style",
c),v=-1==b.inArray("color",c),t="top",G=0,O=function(b){var a="";q&&(a='<div class="propertySubsection width"><input type="text" class="width numeric" value="'+b.width.value+'" /> <select class="widthUnit numericUnit"><option value="px"'+("px"==b.width.unit?' selected="selected"':"")+'>px</option><option value="em"'+("em"==b.width.unit?' selected="selected"':"")+">em</option></select> </div>");C&&(a+='<div class="propertySubsection style"><select class="style"><option value="solid"'+("solid"==b.style?
' selected="selected"':"")+'>solid</option><option value="dotted"'+("dotted"==b.style?' selected="selected"':"")+'>dotted</option><option value="dashed"'+("dashed"==b.style?' selected="selected"':"")+'>dashed</option><option value="double"'+("double"==b.style?' selected="selected"':"")+'>double</option><option value="groove"'+("groove"==b.style?' selected="selected"':"")+'>groove</option><option value="ridge"'+("ridge"==b.style?' selected="selected"':"")+'>ridge</option><option value="inset"'+("inset"==
b.style?' selected="selected"':"")+'>inset</option><option value="outset"'+("outset"==b.style?' selected="selected"':"")+">outset</option></select> </div>");v&&(a+='<div class="propertySubsection color"><input type="text" class="spectrumPicker" /></div>');return a},r=function(b){return function(a){n?f[d].values[b].color=a:f[d].values.color=a;l.updateActiveSubjectStyle()}},s=function(){["top","right","bottom","left"].map(function(a){-1==b.inArray(a+"Side",c)&&-1==b.inArray(a+"Side",f[d].disabled)&&
"object"==typeof f[d].values[a]&&(t=a)})};a.append(e,'<div class="borderEditor"><div class="oneForAll"></div><div class="eachSide"></div></div>');k=b("> div > .oneForAll",a);g=b("> div > .eachSide",a);s();n?(b("> li",e).eq(1).addClass("active"),u=m[t]):(b("> li",e).eq(0).addClass("active"),u=m);["top","right","bottom","left"].map(function(a){var d;-1!=b.inArray(a+"Side",c)?G+=1:(d=b("<div />").addClass("propertySubsection "+a+"Side").html(a[0].toUpperCase()+a.substr(1)+": "+O(n?m[a]:m)).data("borderSide",
a).appendTo(g),v&&H.push(b("input.spectrumPicker",d).spectrum(Q(n?m[a].color:m.color,r(a)))))});3<=G?e.css("display","none"):k.append(O(u));v&&(H.push(b("input.spectrumPicker",k).spectrum(Q(n?m[t].color:m.color,r(t)))),b(".propertySubsection.color",a).on("disabling",function(){b("input.spectrumPicker",a).spectrum("hide")}));n||3<=G?k.css("display","none"):g.css("display","none");q&&(b("input.width",a).on("keydown",function(a){var c=b(this),e=c.val(),h;if(38==a.which||40==a.which){h=n?f[d].values[c.parents().eq(1).data("borderSide")].width.unit:
f[d].values.width.unit;e=""==e?0:"px"==h?parseInt(e,10):parseFloat(e,10);switch(a.which){case 38:e+=1;break;case 40:e-=1,0>e&&(e=0)}c.val(e).data("stepChange",!0);n?f[d].values[c.parents().eq(1).data("borderSide")].width.value=e:f[d].values.width.value=e;l.updateActiveSubjectStyle()}}).on("keyup change",function(a){var c=b(this),e=c.val(),h=!1,g,k="";"px"==(n?f[d].values[c.parents().eq(1).data("borderSide")].width.unit:f[d].values.width.unit)?g=parseInt(e,10):(h="."==e[e.length-1],g=parseFloat(e,
10));if(isNaN(g)||"number"!=typeof g||0>g)g=0;if(!0==c.data("stepChange")||"0"==e||"keyup"!=a.type||0!=g)c.data("stepChange",!1),k=g+(h?".":"");c.val(k);n?f[d].values[c.parents().eq(1).data("borderSide")].width.value=g:f[d].values.width.value=g;l.updateActiveSubjectStyle()}),b("select.widthUnit",a).on("keydown keyup change",function(){var a=b(this),c=a.val();n?f[d].values[a.parents().eq(1).data("borderSide")].width.unit=c:f[d].values.width.unit=c;l.updateActiveSubjectStyle()}));if(C)b("select.style",
a).on("keydown keyup change",function(){var a=b(this),c=a.val();n?f[d].values[a.parents().eq(1).data("borderSide")].style=c:f[d].values.style=c;l.updateActiveSubjectStyle()});e.on("click","> li",function(){var a=b(this),c;a.hasClass("active")||(a.addClass("active").siblings().removeClass("active"),c=b.extend(!0,{},f[d].values),(n=1==a.index())?(f[d].values={top:b.extend(!0,{},c),right:b.extend(!0,{},c),bottom:b.extend(!0,{},c),left:b.extend(!0,{},c)},v&&(b("input.spectrumPicker",k).spectrum("hide"),
b("input.spectrumPicker",g).spectrum("set",c.color)),q&&(b("input.width",g).val(c.width.value),b('select.widthUnit option[value="'+c.width.unit+'"]',g).prop("selected",!0)),C&&b('select.style option[value="'+c.style+'"]',g).prop("selected",!0),k.css("display","none"),g.css("display","")):(s(),a=c[t],f[d].values=a,v&&(b("input.spectrumPicker",g).spectrum("hide"),b("input.spectrumPicker",k).spectrum("set",a.color)),q&&(b("input.width",k).val(a.width.value),b('select.widthUnit option[value="'+a.width.unit+
'"]',k)[0].selected=!0),C&&(b('select.style option[value="'+a.style+'"]',k)[0].selected=!0),k.css("display",""),g.css("display","none"),l.updateActiveSubjectStyle()),h.tinyscrollbar_update("relative"))})};R.boxShadow=[{id:"shadows",name:"Shadows"}];l.generatePropertyEditorHtml.boxShadow=function(a,c,f,d,e){e=f[d].values;var k=function(a){return function(c){b.contains(da.documentElement,a[0])&&(f[d].values.list[a.index()].color=c,l.updateActiveSubjectStyle())}},g=function(a){var c=b('<div><div><span class="remove">Remove</span></div><div>Horizontal: <input type="text" class="x numeric" value="'+
a.x.value+'" /> <select class="xUnit numericUnit"><option value="px"'+("px"==a.x.unit?' selected="selected"':"")+'>px</option><option value="em"'+("em"==a.x.unit?' selected="selected"':"")+'>em</option></select> Vertical: <input type="text" class="y numeric" value="'+a.y.value+'" /> <select class="yUnit numericUnit"><option value="px"'+("px"==a.y.unit?' selected="selected"':"")+'>px</option><option value="em"'+("em"==a.y.unit?' selected="selected"':"")+'>em</option></select> </div><div>Blur: <input type="text" class="blur numeric" value="'+
a.blur.value+'" /> <select class="blurUnit numericUnit"><option value="px"'+("px"==a.blur.unit?' selected="selected"':"")+'>px</option><option value="em"'+("em"==a.blur.unit?' selected="selected"':"")+'>em</option></select> Spread: <input type="text" class="spread numeric" value="'+a.spread.value+'" /> <select class="spreadUnit numericUnit"><option value="px"'+("px"==a.spread.unit?' selected="selected"':"")+'>px</option><option value="em"'+("em"==a.spread.unit?' selected="selected"':"")+'>em</option></select> <input type="text" class="spectrumPicker" /></div><div><label><input type="checkbox" class="inset"'+
(a.inset?' checked="checked"':"")+" />Inset</label></div></div>").appendTo(p);H.push(b("> div > input.spectrumPicker",c).spectrum(Q(a.color,k(c))))},h=a.parents(".styleEditor > .editor.standardScrollbar"),m,u,n,q,p,v;-1==b.inArray("shadows",c)&&(a.append('<div class="collapsableOptionsContainer propertySubsection shadows"><div class="trigger"><label><input type="checkbox" value="1" />Shadows</label></div><div class="contentWrapper"><div class="content"><span>Add shadow</span><p>No shadows set</p><div class="shadowsList"></div></div></div></div>'),
c=b("> .collapsableOptionsContainer.shadows",a),v=b("> .trigger input",c),m=b("> .contentWrapper",c),u=b("> .content",m),q=b("> span",u),n=b("> p",u),p=b("> .shadowsList",u),v.on("change",function(){f[d].values.show=this.checked;f[d].values.list&&0<f[d].values.list.length?(n.css("display","none"),p.css("display","block")):(n.css("display","block"),p.css("display","none"));l.updateActiveSubjectStyle()}),n.css("display","block"),p.css("display","none"),v[0].checked=!1,"object"==typeof e&&(e.show&&0<
e.list.length&&(c.addClass("expanded"),v[0].checked=!0,m.css("display","block"),n.css("display","none"),p.css("display","block")),0<e.list.length&&b.each(e.list,function(a,b){g(b)})),p.on("click","> div > div > span.remove",function(){var a=b(this).parents().eq(1);b("> div > input.spectrumPicker",a).spectrum("destroy");f[d].values.list.splice(a.index(),1);a.remove();0==f[d].values.list.length&&(n.css("display","block"),p.css("display","none"));l.updateActiveSubjectStyle();h.tinyscrollbar_update("relative")}).on("change",
"> div input.inset",function(){f[d].values.list[b(this).parents().eq(2).index()].inset=this.checked;l.updateActiveSubjectStyle()}).on("keydown","input.numeric",function(a){var c=b(this),e=c.val(),h=c.hasClass("blur")?"blur":c.hasClass("spread")?"spread":c.hasClass("x")?"x":"y",g=f[d].values.list[c.parents().eq(1).index()][h];if(38==a.which||40==a.which){e=""==e?0:"px"==g.unit?parseInt(e,10):parseFloat(e,10);switch(a.which){case 38:e+=1;break;case 40:e-=1,"blur"==h&&0>e&&(e=0)}c.val(e).data("stepChange",
!0);g.value=e;l.updateActiveSubjectStyle()}}).on("keyup change","input.numeric",function(a){var c=b(this),e=c.val(),h=!1,g="",k,m=c.hasClass("blur")?"blur":c.hasClass("spread")?"spread":c.hasClass("x")?"x":"y",n=f[d].values.list[c.parents().eq(1).index()][m];"px"==n.unit?k=parseInt(e,10):(h="."==e[e.length-1],k=parseFloat(e,10));if(isNaN(k)||"number"!=typeof k||"blur"==m&&0>k)k=0;if(!0==c.data("stepChange")||"0"==e||"keyup"!=a.type||0!=k)c.data("stepChange",!1),g=k+(h?".":"");c.val(g);n.value=k;l.updateActiveSubjectStyle()}).on("keydown keyup change",
"select.numericUnit",function(){var a=b(this),c=a.hasClass("blur")?"blur":a.hasClass("spread")?"spread":a.hasClass("x")?"x":"y";f[d].values.list[a.parents().eq(1).index()][c].unit=a.val();l.updateActiveSubjectStyle()}),q.on("click",function(){var a={inset:!1,x:{value:1,unit:"px"},y:{value:1,unit:"px"},blur:{value:3,unit:"px"},spread:{value:0,unit:"px"},color:"#000000"};0==f[d].values.list.length&&(n.css("display","none"),p.css("display","block"));f[d].values.list.push(a);g(a);l.updateActiveSubjectStyle();
h.tinyscrollbar_update("relative")}),b("> .propertySubsection.shadows",a).on("disabling",function(){b("input.spectrumPicker",p).spectrum("hide")}))};R.text=[{id:"fontFamily",name:"Font family"},{id:"color",name:"Color"},{id:"size",name:"Size"},{id:"style",name:"Style"},{id:"weight",name:"Weight"},{id:"lineHeight",name:"Line height"},{id:"transform",name:"Transform"},{id:"decorations",name:"Decorations"},{id:"shadows",name:"Shadows"}];l.generatePropertyEditorHtml.text=function(a,c,f,d,e,k,g){var h=
f[d].values,m=[],u=function(a){return function(c){b.contains(da.documentElement,a[0])&&(f[d].values.shadows.list[a.index()].color=c,l.updateActiveSubjectStyle())}},n=function(a){var c=b('<div><div><span class="remove">Remove</span></div><div>Horizontal: <input type="text" class="x numeric" value="'+a.x.value+'" /> <select class="xUnit numericUnit"><option value="px"'+("px"==a.x.unit?' selected="selected"':"")+'>px</option><option value="em"'+("em"==a.x.unit?' selected="selected"':"")+'>em</option></select> Vertical: <input type="text" class="y numeric" value="'+
a.y.value+'" /> <select class="yUnit numericUnit"><option value="px"'+("px"==a.y.unit?' selected="selected"':"")+'>px</option><option value="em"'+("em"==a.y.unit?' selected="selected"':"")+'>em</option></select> </div><div>Radius: <input type="text" class="radius numeric" value="'+a.radius.value+'" /> <select class="radiusUnit numericUnit"><option value="px"'+("px"==a.radius.unit?' selected="selected"':"")+'>px</option><option value="em"'+("em"==a.radius.unit?' selected="selected"':"")+'>em</option></select> <input type="text" class="spectrumPicker" /></div></div>').appendTo(w);
a=b("> div > input.spectrumPicker",c).spectrum(Q(a.color,u(c)));H.push(a)},q=a.parents(".styleEditor > .editor.standardScrollbar"),r,v,t,s,w,x,y,D,z,A,B;v=-1==b.inArray("fontFamily",c);s=-1==b.inArray("color",c);x=-1==b.inArray("size",c);var F=-1==b.inArray("lineHeight",c),K=-1==b.inArray("style",c),I=-1==b.inArray("weight",c),M=-1==b.inArray("shadows",c);k=-1==b.inArray("decorations",c);c=-1==b.inArray("transform",c);if(v||s)a.append("<div>"+(v?'<select class="propertySubsection fontFamily"></select> ':
"")+(s?'<span class="propertySubsection color"><input type="text" class="spectrumPicker" /></span>':"")+"</div>"),v&&(b.isArray(h.customFontFamilies)&&(m=h.customFontFamilies),b.isArray(g.customFonts)&&(m=m.concat(g.customFonts)),b.isArray(L.defaultFonts)&&(m=m.concat(L.defaultFonts)),r=b("> div > select.fontFamily",a).on("keydown keyup change",function(){f[d].values.fontFamily=b(this).val();l.updateActiveSubjectStyle()}),b.each(m,function(a,b){r.append('<option value="'+b.name+'"'+(h.fontFamily==
b.name?' selected="selected"':"")+">"+b.name+"</option>")})),s&&(B=b("> div > .propertySubsection.color > .spectrumPicker",a).spectrum(Q(h.color,function(a){f[d].values.color=a;l.updateActiveSubjectStyle()})),H.push(B),b("> div > .propertySubsection.color",a).on("disabling",function(){B.spectrum("hide")}));if(x||F)x&&a.append('<div class="propertySubsection size">Size: <input type="text" class="size numeric" value="'+h.size.value+'" /> <select class="sizeUnit numericUnit"><option value="px"'+("px"==
h.size.unit?' selected="selected"':"")+'>px</option><option value="em"'+("em"==h.size.unit?' selected="selected"':"")+'>em</option><option value="%"'+("%"==h.size.unit?' selected="selected"':"")+">%</option></select> </div>"),F&&a.append('<div class="propertySubsection lineHeight">Line height: <input type="text" class="lineHeight numeric" value="'+h.lineHeight.value+'" /> <select class="lineHeightUnit numericUnit"><option value=""'+(""==h.lineHeight.unit?' selected="selected"':"")+'><em>font size ratio</em></option><option value="px"'+
("px"==h.lineHeight.unit?' selected="selected"':"")+'>px</option><option value="em"'+("em"==h.lineHeight.unit?' selected="selected"':"")+'>em</option><option value="%"'+("%"==h.lineHeight.unit?' selected="selected"':"")+">%</option></select> </div>"),b("> div > input.size, > div > input.lineHeight",a).on("keydown",function(a){var c=b(this),e=c.val(),h,g=c.hasClass("size")?"size":"lineHeight";if(38==a.which||40==a.which){h=f[d].values[g].unit;e=""==e?0:"px"==h?parseInt(e,10):parseFloat(e,10);switch(a.which){case 38:e+=
1;break;case 40:e-=1,0>e&&(e=0)}c.val(e).data("stepChange",!0);f[d].values[g].value=e;l.updateActiveSubjectStyle()}}).on("keyup change",function(a){var c=b(this),e=c.val(),h=!1,g,k="",m=c.hasClass("size")?"size":"lineHeight";"px"==f[d].values[m].unit?g=parseInt(e,10):(h="."==e[e.length-1],g=parseFloat(e,10));if(isNaN(g)||"number"!=typeof g||0>g)g=0;if(!0==c.data("stepChange")||"0"==e||"keyup"!=a.type||0!=g)c.data("stepChange",!1),k=g+(h?".":"");c.val(k);f[d].values[m].value=g;l.updateActiveSubjectStyle()}),
b("> div > select.sizeUnit, > div > select.lineHeightUnit",a).on("keydown keyup change",function(){var a=b(this),c=a.hasClass("sizeUnit")?"size":"lineHeight";f[d].values[c].unit=a.val();l.updateActiveSubjectStyle()});if(K||I)a.append("<div>"+(K?'<label class="propertySubsection style"><input type="checkbox" class="style" value="1" />Italic</label>':"")+(I?'<label class="propertySubsection weight"><input type="checkbox" class="weight" value="1" />Bold</label>':"")+"</div>"),b("> div input.style, > div input.weight",
a).on("change",function(){var a=b(this).hasClass("style")?"style":"weight";f[d].values[a]=this.checked?"style"==a?"italic":"bold":"normal";l.updateActiveSubjectStyle()}),K&&b("> div input.style",a).prop("checked","italic"==h.style),I&&b("> div input.weight",a).prop("checked","bold"==h.weight);M&&(a.append('<div class="collapsableOptionsContainer propertySubsection shadows"><div class="trigger"><label><input type="checkbox" value="1" />Shadows</label></div><div class="contentWrapper"><div class="content"><span>Add shadow</span><p>No shadows set</p><div class="shadowsList"></div></div></div></div>'),
g=b("> .collapsableOptionsContainer.shadows",a),x=b("> .trigger input",g),m=b("> .contentWrapper",g),v=b("> .content",m),s=b("> span",v),t=b("> p",v),w=b("> .shadowsList",v),x.on("change",function(){f[d].values.shadows.show=this.checked;l.updateActiveSubjectStyle()}),"object"==typeof h.shadows&&h.shadows.show&&0<h.shadows.list.length?(g.addClass("expanded"),x[0].checked=!0,m.css("display","block"),t.css("display","none"),b.each(h.shadows.list,function(a,b){n(b)})):(t.css("display","block"),w.css("display",
"none"),x[0].checked=!1),w.on("click","> div > div > span.remove",function(){var a=b(this).parents().eq(1);b("> div > input.spectrumPicker",a).spectrum("destroy");f[d].values.shadows.list.splice(a.index(),1);a.remove();0==f[d].values.shadows.list.length&&(t.css("display","block"),w.css("display","none"));l.updateActiveSubjectStyle();q.tinyscrollbar_update("relative")}).on("keydown","input.numeric",function(a){var c=b(this),e=c.val(),g=c.hasClass("radius")?"radius":c.hasClass("x")?"x":"y",h=f[d].values.shadows.list[c.parents().eq(1).index()][g];
if(38==a.which||40==a.which){e=""==e?0:"px"==h.unit?parseInt(e,10):parseFloat(e,10);switch(a.which){case 38:e+=1;break;case 40:e-=1,"radius"==g&&0>e&&(e=0)}c.val(e).data("stepChange",!0);h.value=e;l.updateActiveSubjectStyle()}}).on("keyup change","input.numeric",function(a){var c=b(this),e=c.val(),g=!1,h="",k,m=c.hasClass("radius")?"radius":c.hasClass("x")?"x":"y",n=f[d].values.shadows.list[c.parents().eq(1).index()][m];"px"==n.unit?k=parseInt(e,10):(g="."==e[e.length-1],k=parseFloat(e,10));if(isNaN(k)||
"number"!=typeof k||"radius"==m&&0>k)k=0;if(!0==c.data("stepChange")||"0"==e||"keyup"!=a.type||0!=k)c.data("stepChange",!1),h=k+(g?".":"");c.val(h);n.value=k;l.updateActiveSubjectStyle()}).on("keydown keyup change","select.numericUnit",function(){var a=b(this),c=a.hasClass("radiusUnit")?"radius":a.hasClass("xUnit")?"x":"y";f[d].values.shadows.list[a.parents().eq(1).index()][c].unit=a.val();l.updateActiveSubjectStyle()}),s.on("click",function(){var a={x:{value:1,unit:"px"},y:{value:1,unit:"px"},radius:{value:2,
unit:"px"},color:"#000000"};0==f[d].values.shadows.list.length&&(t.css("display","none"),w.css("display","block"));f[d].values.shadows.list.push(a);n(a);l.updateActiveSubjectStyle();q.tinyscrollbar_update("relative")}),b("> .propertySubsection.shadows",a).on("disabling",function(){b("input.spectrumPicker",w).spectrum("hide")}));if(k){a.append('<div class="collapsableOptionsContainer propertySubsection decorations"><div class="trigger"><label><input type="checkbox" value="1" />Decoration</label></div><div class="contentWrapper"><div class="content"><label><input type="checkbox" value="1" class="underline" />Underline</label> <label><input type="checkbox" value="1" class="overline" />Overline</label> <label><input type="checkbox" value="1" class="lineThrough" />Line through</label> </div></div></div>');
k=b("> .collapsableOptionsContainer.decorations",a);g=b("> .trigger input",k);y=b("input.underline",k);D=b("input.overline",k);z=b("input.lineThrough",k);y.on("change",function(){f[d].values.decorations.underline=this.checked;l.updateActiveSubjectStyle()})[0].checked=!0===h.decorations.underline;D.on("change",function(){f[d].values.decorations.overline=this.checked;l.updateActiveSubjectStyle()})[0].checked=!0===h.decorations.overline;z.on("change",function(){f[d].values.decorations.lineThrough=this.checked;
l.updateActiveSubjectStyle()})[0].checked=!0===h.decorations.lineThrough;if(!0===h.decorations.underline||!0===h.decorations.overline||!0===h.decorations.lineThrough)g[0].checked=!0,k.addClass("expanded"),b("> .contentWrapper",k).css("display","block");g.on("change",function(){f[d].values.decorations.underline=!1;f[d].values.decorations.overline=!1;f[d].values.decorations.lineThrough=!1;y[0].checked=!1;D[0].checked=!1;z[0].checked=!1;l.updateActiveSubjectStyle()})}if(c){a.append('<div class="collapsableOptionsContainer propertySubsection transform"><div class="trigger"><label><input type="checkbox" value="1" />Transform</label></div><div class="contentWrapper"><div class="content"><label><input type="radio" value="1" class="none" name="'+
e+'_transformRadios" />None</label> <label><input type="radio" value="1" class="uppercase" name="'+e+'_transformRadios" />Uppercase</label> <label><input type="radio" value="1" class="lowercase" name="'+e+'_transformRadios" />Lowercase</label> <label><input type="radio" value="1" class="capitalize" name="'+e+'_transformRadios" />Capitalize</label> </div></div></div>');a=b("> .collapsableOptionsContainer.transform",a);e=b("> .trigger input",a);c=b("> .contentWrapper",a);A=b("input.none",c);k=b("input.uppercase",
c);g=b("input.lowercase",c);m=b("input.capitalize",c);if(h.transform==p||""==h.transform||"none"==h.transform)A[0].checked=!0;else switch(e[0].checked=!0,a.addClass("expanded"),c.css("display","block"),h.transform){case "uppercase":k[0].checked=!0;break;case "lowercase":g[0].checked=!0;break;case "capitalize":m[0].checked=!0}b("input",c).on("change",function(){var a=b(this),c="";a.hasClass("uppercase")?c="uppercase":a.hasClass("lowercase")?c="lowercase":a.hasClass("capitalize")&&(c="capitalize");
f[d].values.transform=c;l.updateActiveSubjectStyle()});e.on("change",function(){this.checked||(A[0].checked=!0,f[d].values.transform="",l.updateActiveSubjectStyle())})}};s.html={encode:function(a){return b("<p />").text(a).html()},decode:function(a){return b("<p />").html(a).text()}};s.css={removeClassContaining:function(a,c){a.each(function(){var a=b(this),d=b.map(a.attr("class").split(" "),function(a){return-1===a.indexOf(c)?a:p});a.attr("class",d.join(" "))})},generateColorText:function(a){return null==
a||0==a.alpha?"transparent":1==a.alpha?a.toHexString():a.toRgbString()}};s.string={random:function(a){for(var b="";0<a;--a)b+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.round(61*Math.random())];return b}};s.files={readableFileSize:function(a){var b=0;for(a=parseInt(a,10);1023<a;)b+=1,a/=1024;a=a.toFixed(2);switch(b){case 1:return a+" KB";case 2:return a+" MB";case 3:return a+" GB";case 4:return a+" PB";default:return a+" B"}}};s.array={removeItem:function(a,c){for(var f=
b.inArray(a,c);-1!=f;)c.splice(f,1),f=b.inArray(a,c);return c}};s.style={getNameAndColors:function(a,b){var f=a.templateGroups[b];return f?f:a.templateGroups["default"]},replaceCssTokens:function(a,b,f,d){return"string"!=typeof a?"":a.replace(/_-StyleClass-_/g,b).replace(/_-ThemeName-_/g,f).replace(/_-StyleAssetsClientRoot-_/g,d)},getImportUrlFromFont:function(a,c){var f=p;b.each(a,function(a,e){if(b.isPlainObject(e)&&e.name==c)return f=e.importUrl,!1});return f}};ca.StyleWizard=function(){w=0<arguments.length?
arguments[0]:[];b.extend(!0,void 0,w);L=b.extend(!0,{defaultFonts:[{name:"Arial"},{name:"Arial Black"},{name:"Verdana"},{name:"Times New Roman"},{name:"Avant Garde"},{name:"Georgia"},{name:"Courier New"},{name:"Impact"},{name:"Tahoma"},{name:"Comic Sans MS"},{name:"Lucida Console"}],backend:"",localization:{}},1<arguments.length?arguments[1]:{});ea||(ea=!0,B=b('<div id="EasyDNNstyleWizard"><div class="headerWrapper"><div class="logos"><a class="eds" target="_blank" href="http://www.easydnnsolutions.com/" title="EasyDNNSolutions.com">EasyDNNSolutions.com</a><a class="styleWizard" target="_blank" href="http://www.easydnnsolutions.com/modules/easydnnstylewizard/" title="EasyDNNSolutions StyleWizard">EasyDNNstyleWizard</a></div></div><div class="styleSubjectSelectionWrapper" style="display: none;"><select></select></div><div class="styleSubjectsWrapper" style="display: none;"></div><div class="introContainer standardScrollbar"><div class="viewport"><div class="overview"><div class="intro"></div></div></div><div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div></div><div class="footerWrapper"><div class="actions"><span class="action save">Save</span><select class="collectionSaveSelect"></select></div></div></div><ol id="EasyDNNstyleWizardCollections"></ol>').appendTo("body"),
I=b('<div id="EasyDNNstyleWizardToggle"><span></span>Show</div>').appendTo("body"),ja=b("> .headerWrapper",B),Z=b("> .footerWrapper",B),M=b("> .styleSubjectSelectionWrapper",B),x=b("> .styleSubjectsWrapper",B),T=b("> .introContainer",B),F=b("#EasyDNNstyleWizardCollections"),U=b("> .actions > .collectionSaveSelect",Z),V=B.outerWidth(),1<w.length&&U.append('<option value="all">All</option>').addClass("show"),b.each(w,function(a,c){var f=b('<li class="'+c.type+'"><span>'+c.name+"</span></li>"),d=c.type.charAt(0).toUpperCase()+
c.type.slice(1);"news"==c.type&&(d="EasyDNNnews");1<w.length&&U.append('<option value="'+c.type+'">'+d+"</option>");A.push(0);f.data("type",c.type);F.append(f)}),F.css({left:-F.outerHeight()}),F.on("click","> li",function(){var a=b(this).index();y!=a&&(y=a,r.openActiveCollection())}),T.tinyscrollbar(),r.resize(),ma.resize(function(){r.resize()}).scroll(function(){b.each(H,function(a,b){b.spectrum("reflow")})}),r.toggleInterface("visible"==b.cookie("edsStyleWizardInterfaceVisible"),!1),I.on("click",
function(){r.toggleInterface(Y,!0);b.cookie("edsStyleWizardInterfaceVisible",Y?"hidden":"visible",{path:"/"})}),b("> select",M).on("change",function(){A[y]=this.selectedIndex;r.openActiveSubject()}),b("> .actions > .save",Z).on("click",function(){var a=U.hasClass("show")?U.val():"all",c,f=function(){var a;d&&0==S.length&&(a=b("p.mainMessage",c),e?a.addClass("error").text(k):a.addClass("success").text("All styles saved successfully"),b("> div",c).append('<div class="actions"><span>Ok</span></div>'))},
d=!1,e=!1,k="An error occured while saving",g=!1;0<S.length||(c=b('<div id="EasyDNNstyleWizardModalWrapper" class="save"><div><p class="mainMessage">Saving styles...</p></div></div>').appendTo("body").fadeTo(200,1).on("click","> div > .actions > span",function(){g||(g=!0,c.fadeTo(200,0,function(){c.remove()}))}),setTimeout(function(){d=!0;f()},1E3),b.each(w,function(c,d){if("all"==a||d.type==a)S.push(d.type),b.ajax({type:"post",data:{collection:d.type,action:"saveCollection",collectionJson:JSON.stringify(d)},
dataType:"json",success:function(a){a.success!=p&&a.success||(e=!0)},error:function(a){403==a.status&&(k="You don't have permission to make changes");e=!0},complete:function(){S.splice(S.indexOf(d.type),1);f()},timeout:15E3,url:L.backend})}))}),x.on("click","> div > .slider > .styleSelection .styleTypeSelection > li",function(){var a=b(this);a.hasClass("active")||(a.addClass("active").siblings().removeClass("active"),b(">",a.parent().siblings(".styleTypes")).css("display","none").eq(a.index()).css("display",
"block").find("li").removeClass("actionsOverlayActive"),a.parents(".slider > .styleSelection.standardScrollbar").tinyscrollbar_update("relative"))}).on("click","> div > .slider .styleTypes > div > ol > li > div > .standardOverlay, > div > .slider .styleTypes > div > ol > li > span",function(){var a=y,c=A[a],f=b(this),f="span"==this.tagName.toLowerCase()?f.parent():f.parents().eq(1),d=f.parents().eq(1).hasClass("predefined")?"predefined":"custom",e=f.data("styleId"),a=w[a],c=a.subjects[c],k,g,h="";
f.siblings().removeClass("actionsOverlayActive");if(c.activeStyle.type!=d||c.activeStyle.id!=e)c.activeStyle.type=d,c.activeStyle.id=e,k=a.styleGroups[c.styleGroup],g=k.styles[d][e],b("> div > ol > li",f.parents().eq(2)).removeClass("active"),f.addClass("active"),h="predefined"==d?g.baseCss:k.styles.predefined[g.originalStyleId].baseCss,"string"!=typeof h&&(h=""),l.changeSectionStyle({collectionType:a.type,styleSwitchCriteria:c.styleSwitchCriteria,styleGroup:c.styleGroup,globalFontFamilies:k.customFontFamilies,
template:c.template,templateGroup:c.templateGroup,themeName:k.themeName,assetsRootPath:k.styleAssetsClientRoot,style:{type:d,id:e,definition:k.styleDefinitions,values:g.values,baseCss:h}})}).on("click","> div > .slider .styleTypes > div > ol > li > div > .standardOverlay > .openActionsOverlay",function(){b(this).parents().eq(2).addClass("actionsOverlayActive");return!1}).on("click","> div > .slider .styleTypes > div > ol > li > div > .actionsOverlay > .action.close",function(){b(this).parents().eq(2).removeClass("actionsOverlayActive");
return!1}).on("click","> div > .slider .styleTypes .actionsOverlay > .action.edit",function(){var a=b(this).parents(),c=a.filter(".styleSubjectsWrapper > div > div"),f=a.eq(2),d=f.parents().eq(1).hasClass("predefined")?"predefined":"custom",e=f.data("styleId"),k=y,g=A[k],h=w[k],a=h.subjects[g],m=h.styleGroups[a.styleGroup].styles,l,n=b("> .subject_"+k+"_"+g+" > > .styleSelection .styleTypes",x),q;b("> > ol > li",n).removeClass("active actionsOverlayActive");"predefined"==d?(e=r.cloneStyle({collection:k,
subject:g,type:d,id:e}),d="custom",b(">",n.siblings(".styleTypeSelection")).removeClass("active").css("display","").filter(".custom").addClass("active"),l=m[d][e],q=s.style.getNameAndColors(l,a.templateGroup),b(">",n).css("display","none").filter("."+d).css("display","block").find("> ol").append(r.generateStyleListItem({name:q.name,type:d,colors:q.colors,active:!0,id:e})),f=b('> div[class*=" subject_'+k+'_"], > div[class^="subject_'+k+'_"]',x),f.each(function(){var a=b(this),c=a.data("subjectIndex");
c!=g&&(c=h.subjects[c],c==p||l.show&&-1==b.inArray(c.templateGroup,l.show)||(a=b("> > .styleSelection > .viewport > .overview",a),b("> .styleTypeSelection > .custom",a).css("display",""),b("> .styleTypes > .custom > ol",a).append(r.generateStyleListItem({name:q.name,type:d,colors:q.colors,active:!1,id:e}))))}),b("> .styleSelection",c).tinyscrollbar_update("relative")):f.addClass("active");a.activeStyle.type=d;a.activeStyle.id=e;r.setupStyleEditor();b("> .styleEditor > .editor",c).tinyscrollbar_update("relative");
c.animate({left:-W},200)}).on("click","> div > .slider > .styleEditor > .header > .back",function(){b(this).parents().eq(1);b(this).parents().eq(2).stop(!0).animate({left:0},100)}).on("click","> div > .slider > .styleEditor .styleEditorSpacer .toggleContainer > div.name",function(){var a=b(this).parents(),c=a.eq(0).siblings(".toggleContent"),f=a.eq(1),d=a.filter(".styleEditor > .editor"),a=function(){d.tinyscrollbar_update("relative")},e=f.data("propertyInitializer");e&&(e(),f.data("propertyInitializer",
!1));f.hasClass("expanded")?(f.removeClass("expanded"),c.slideUp(100,a)):(f.addClass("expanded"),c.slideDown(100,a));return!1}).on("click","> div > .slider > .styleEditor .styleEditorSpacer ul.properties .toggleContent > ol > li",function(){var a=b(this);a.hasClass("active")||(a.addClass("active").siblings().removeClass("active"),b("> div",a.parent().siblings(".propertyStatesWrapper")).css("display","none").eq(a.index()).css("display",""),a.parents(".styleEditor > .editor").tinyscrollbar_update("relative"))}).on("change",
"> div > .slider > .styleEditor .styleEditorSpacer ul.properties .toggleContent .collapsableOptionsContainer > .trigger input",function(){var a=b(this),c=a.parents().eq(2),f=b("> .contentWrapper",c),d=function(){a.parents(".styleEditor > .editor").tinyscrollbar_update("relative")};this.checked?(c.addClass("expanded"),f.stop(!0).slideDown(100,d)):(c.removeClass("expanded"),f.stop(!0).slideUp(100,d));a.parents(".styleEditor > .editor").tinyscrollbar_update("relative")}).on("change","> div > .slider > .styleEditor > .header > .styleName input",
function(){var a=b(this),c=y,f=w[c],c=f.subjects[A[c]],f=f.styleGroups[c.styleGroup].styles[c.activeStyle.type][c.activeStyle.id],d=f.templateGroups[c.templateGroup]?c.templateGroup:"default",a=b("> .styleSelection .styleTypes > .custom > ol > li."+c.activeStyle.id+" > span",a.parents().eq(4)).text(a.val()).html();f.templateGroups[d].name=a}))}})(eds1_10,window,document);